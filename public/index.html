<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LycanDevBot</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

    /* Reset & base */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      background: #0d0d14;
      color: #c8d6f7;
      font-family: 'Orbitron', monospace, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
      padding: 2rem;
      user-select: none;
    }
    h1 {
      color: #3de1f2;
      text-shadow: 0 0 8px #3de1f2;
      margin-bottom: 1rem;
      letter-spacing: 0.1em;
      font-weight: 500;
    }
    #chat {
      background: #121523;
      border: 1px solid #3de1f2;
      border-radius: 8px;
      padding: 1rem;
      width: 100%;
      max-width: 600px;
      height: 400px;
      overflow-y: auto;
      box-shadow: 0 0 12px #3de1f2aa;
      margin-bottom: 1rem;
      line-height: 1.4;
    }
    .msg {
      margin: 0.5rem 0;
      max-width: 75%;
      word-wrap: break-word;
      white-space: pre-wrap;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      user-select: text;
    }
    .user {
      background: #1c2541;
      color: #59c3c3;
      margin-left: auto;
      text-align: right;
      box-shadow: 0 0 6px #59c3c3bb;
    }
    .bot {
      background: #283149;
      color: #a5d8ff;
      margin-right: auto;
      text-align: left;
      box-shadow: 0 0 6px #3de1f2bb;
    }
    #input {
      width: 100%;
      max-width: 600px;
      padding: 0.75rem 1rem;
      font-family: 'Orbitron', monospace, sans-serif;
      font-weight: 500;
      font-size: 1rem;
      border: 1px solid #3de1f2;
      border-radius: 8px;
      background: #121523;
      color: #c8d6f7;
      outline: none;
      box-shadow: 0 0 8px #3de1f2aa inset;
      margin-bottom: 1rem;
      transition: border-color 0.3s ease;
    }
    #input:focus {
      border-color: #00e6ff;
      box-shadow: 0 0 12px #00e6ff inset;
    }
    button {
      background: #3de1f2;
      border: none;
      color: #0d0d14;
      font-family: 'Orbitron', monospace, sans-serif;
      font-weight: 500;
      font-size: 1rem;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 12px #3de1f2bb;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background: #00e6ff;
      box-shadow: 0 0 18px #00e6ffcc;
    }
    @media (max-width: 640px) {
      body {
        padding: 1rem;
      }
      #chat, #input {
        max-width: 100%;
      }
      button {
        width: 100%;
        padding: 0.75rem 0;
      }
    }
  </style>
</head>
<body>
  <h1>LycanDevBot</h1>
  <div id="chat"></div>
  <input id="input" type="text" placeholder="Ask something..." autocomplete="off" />
  <button onclick="send()">Send</button>

  <script>
    async function send() {
      const input = document.getElementById('input');
      const msg = input.value.trim();
      if (!msg) return;
      display('user', msg);
      input.value = '';
      input.disabled = true;
      try {
        const res = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: msg })
        });
        const data = await res.json();
        display('bot', data.reply || 'Error: No reply from server');
      } catch (e) {
        display('bot', 'Error contacting server');
      } finally {
        input.disabled = false;
        input.focus();
      }
    }

    function display(role, text) {
      const div = document.createElement('div');
      div.className = `msg ${role}`;
      div.innerText = text;
      document.getElementById('chat').appendChild(div);
      document.getElementById('chat').scrollTop = document.getElementById('chat').scrollHeight;
    }

    document.getElementById('input').addEventListener('keydown', e => {
      if (e.key === 'Enter') send();
    });

    window.onload = () => document.getElementById('input').focus();
  </script>
</body>
</html>
